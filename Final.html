<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Final</title>

    <header class="pb-3 mb-4 border-bottom"> 
        <!-- <a class="d-flex align-items-center text-body-emphasis text-decoration-none">
            <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor"></path> 
            <div class="fs-4" style="padding: 0px 16px 0px 16px">
                <svg width="26" height="26" fill="currentColor" class="bi bi-cash-coin" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"/>
                    <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"/>
                    <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"/>
                    <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"/>
                </svg>
                <span style="padding: 0px 4px 0px 4px" class="fs-4">JUAN's CURRENCY CORNER</span>
            </div> 
            
        </a> -->

        <nav class="navbar sticky-top bg-body-tertiary">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">Sticky top</a>
            

          </div>
        </nav>

        <!-- <ul class="nav nav-pills" style="padding: 0px 16px 0px 16px">
          <li class="nav-item ">
            <a class="nav-link" aria-current="page" href="https://fxratesapi.com/docs">FXRatesAPI</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Documentation</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="https://github.com/JuanLucido">Juan's Github</a></li>
              <li><a class="dropdown-item" href="https://github.com/JuanLucido/juanlucido.github.io">This Site's Repository</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#">API Documentation</a></li>
              <li><a class="dropdown-item" href="#">Google Slide Presentation</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">FAQ</a>
          </li>

          <li class="nav-item">
            <a class="nav-link disabled" aria-disabled="true">Disabled</a>
          </li>

        </ul> -->

    </header>



    <!-- <div class="jumbotron jumbotron-fluid">
        <style>
            div {
                padding: 16px;
                margin: 0px;
            }
        </style>
        <h4 class="display-2">JUAN'S CURRENCY CORNER</h4>
        <p class="lead">
            <a class="btn btn-primary btn-lg" role="button" onclick="getLatest()">Convert Currency</a>
        </p>
    </div> -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body>
  <p class="lead">
    <a class="btn btn-primary btn-lg" role="button" onclick="getLatest()">Convert Currency</a>
  </p>


    <p id="baseCurrName">[Placeholder]</p>
    <p id="exchangeRate">[Placeholder]</p>
    <p id="exchangeValue">[Placeholder]</p>
  
    <!-- Need to add form checking!!! -->
    <label for="baseCurrency" class="form-label">Base Currency</label>
    <input class="form-control" list="currencyList" id="baseCurrency" placeholder="Type to search...">
    <datalist id="currencyList"></datalist>

    <!-- Need to add form checking!!! -->
    <label for="exchangeCurrency" class="form-label">Exchange Currency</label>
    <input class="form-control" list="currencyList" id="exchangeCurrency" placeholder="Type to search...">
    <datalist id="currencyList"></datalist>

    <!-- Need to add form checking!!! -->
    <div class="row g-3 align-items-center">
        <div class="col-auto">
          <input type="number" class="form-control" required name="something" min="0" value="1.00" step=".01" id="inputMoneyAmount" aria-describedby="inputMoneyAmountHelp">
        </div>
        <div class="col-auto">
          <span id="inputMoneyAmountHelp" class="form-text">
            Only 2 decimal places allowed.
          </span>
        </div>
    </div>

    <!-- Need to add form checking!!! -->
    <label for="currencies" class="form-label">Explore Currencies</label>
    <input class="form-control" list="currencyList" id="currencies" placeholder="Search for a Currency...">
    <datalist id="currencyList"></datalist>

    <!-- This button triggers API to retrieve Currency data like: name, symbol, etc -->
    <button type="button" class="btn btn-primary" onclick="getCurrencyData()">Trigger API Currency Data</button>

    <script>
        //This function fills the Base/Exchange/Explore Currencies'Search/Selection List with .../currencies endpoint's list of currencies
        //There are specifically 5 currencies that can't be converted and idk what they are :D
        let currenciesObj = {};
        
        window.onload = async function getCurrencies()
        {
            const url = `https://api.fxratesapi.com/currencies?api_key=fxr_live_a5ff0b1d729a595443b348c5474a17b12e99`;
            const options = { method: 'GET',};
            const response = await fetch(url, options);
            currenciesObj = await response.json(); //This line accomplishes JSON parsing

            const numberOfKeys = Object.keys(currenciesObj).length;

            for (let i = 0; i < numberOfKeys; i++) {
                let select = document.getElementById("currencyList");
                const option = document.createElement('option');
                const currentKey = Object.keys(currenciesObj)[i];
                const currentText = currentKey.concat(" - ", currenciesObj[currentKey].name);
                option.id = currentKey;
                option.text = currentText;
                console.log(option);
                select.append(option); //Populates data list for currency options
            }
        };

        //This function is for populates currency data
        function getCurrencyData()
        {
            
        };

    </script>

    <script>
        //truncateString(str) solely exists to truncate string value from baseDropdown.value & exchangeDropdown.value just so that 
        //a proper search can be done to retrieve currency data from the API via URLSearchParams(paramsObj)
        function truncateString(str) { return str.slice(0, 3); }

        const decimalPlaces = 10; //Set to '10' for max decimal places because that's the most the API can give me

        //The getLatest() async function GETs API data from the endpoint `.../latest`
        //The async function take user inputs to generate a url that grabs a truncated JSON file with data relevant to the user's search/input parameters
        async function getLatest() 
        {
        //User inputs grabbed from form entry
        const baseDropdown = document.getElementById("baseCurrency");
        const exchangeDropdown = document.getElementById("exchangeCurrency");
        const inputAmount = document.getElementById("inputMoneyAmount");
        const selectedBase = truncateString(baseDropdown.value);
        const selectedExchange = truncateString(exchangeDropdown.value);
        const moneyAmount = inputAmount.value;

        //Example of appended string: `currencies=USD&base=EUR&format=JSON&places=2&amount=1`
        const paramsString = `currencies=${selectedExchange}&base=${selectedBase}&format=JSON&places=${decimalPlaces}&amount=${moneyAmount}`;
        const paramsObj = { currencies: selectedExchange, base: selectedBase, format: "JSON", places: decimalPlaces, amount: moneyAmount};
        
        const thing = new URLSearchParams(paramsObj);
        thing.set('api_key', 'fxr_live_a5ff0b1d729a595443b348c5474a17b12e99');

        //API call based on parameters being appended to end point url
        const url = `https://api.fxratesapi.com/latest?${thing.toString()}`;
        const options = { method: 'GET',};
        const response = await fetch(url, options);
        const latestObj = await response.json(); //This line accomplishes JSON parsing

        //ExchangeValue below is autoformatted to calculate (MoneyAmount * exchangeValue)
        const baseName = latestObj.base;
        const exchangeValue = latestObj.rates[selectedExchange];

        //Fetching url JSON retrieves => moneyAmount * (exchange rate of currency)
        //This is why we need to undo conversion to get exchangeRate
        let exchangeRate = exchangeValue / moneyAmount ; 

        document.getElementById("baseCurrName").innerHTML = baseName;
        document.getElementById("exchangeRate").innerHTML = exchangeRate; //Prints exchange rate of trading '1' of base currency to exchange currency
        document.getElementById("exchangeValue").innerHTML = exchangeValue.toFixed(2); //Prints => moneyAmount * (exchange rate of currency)
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>

<hr>
<p style="padding: 0px 15px 0px 15px"><strong>This page was last updated on: 08 May, 2025 @ 6:29:59pm EST   - Juan L</strong></p>

</html>